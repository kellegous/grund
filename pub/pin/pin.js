var GridSizes=[{X:4,Y:1},{X:3,Y:1},{X:2,Y:1},{X:3,Y:2},{X:1,Y:1},{X:2,Y:3},{X:1,Y:2},{X:1,Y:3},{X:1,Y:4}],Render=function(f){var g=0;f.forEach(function(d){console.log(d.Size.X);d.Elem.css("top",g).css("left",0).css("width",d.Size.X).css("height",d.Size.Y);g+=d.Size.Y})},GridOf=function(f){var g=GridSizes.map(function(b){return{X:b.X*f,Y:b.Y*f,R:b.X/b.Y}}),d=function(b,e){for(var a=0,c=b.length;a<c;++a){var h=b[a];if(!h.Used&&h.Size.X<=e.W&&h.Size.Y<=e.H)return h}return null},i=function(b){for(var e=
0,a=b.length;e<a;++e)if(!b[e].Used)return b[e];return null},k=function(b,e,a,c,h){b.Elem.css("top",a+10).css("left",e+10).css("width",c-20).css("height",h-20);b.Used=!0},j=function(b,e,a){var c,h=d(b,a);if(h)c=h.Size;else{h=i(b);if(!h)return;c={X:a.W,Y:a.H}}k(h,a.X,a.Y,c.X,c.Y);c.X<a.W&&j(e,b,{X:a.X+c.X,Y:a.Y,W:a.W-c.X,H:a.H});c.Y<a.H&&j(e,b,{X:a.X,Y:a.Y+c.Y,W:c.X,H:a.H-c.Y})};return function(b){b.forEach(function(a){for(var b=a.Size,b=b.X/b.Y,c=g[0],e=Math.abs(c.R-b),d=1,f=g.length;d<f;++d){var i=
Math.abs(g[d].R-b);i>=e||(c=g[d],e=i)}a.Size=c;a.Used=!1});for(var e=b.slice(0).sort(function(a,b){return b.Size.Y-a.Size.Y}),e=b,a={X:0,Y:0,W:4*f,H:4*f};null!=i(e);){var c=d(e,a);if(!c)break;k(c,a.X,a.Y,c.Size.X,c.Size.Y);j(b,e,{X:c.Size.X,Y:a.Y,W:a.W-c.Size.X,H:c.Size.Y});a.Y+=c.Size.Y}}},ToastTimer=-1,Toast=function(f,g){var d=$("#notif");$(".titl",d).text(f);$(".text",d).text(g);var i=function(){d.fadeOut(500);ToastTimer=-1};0<=ToastTimer?(clearTimeout(ToastTimer),ToastTimer=setTimeout(i,1E3)):
d.fadeIn(500,function(){ToastTimer=setTimeout(i,1500)})};$.getJSON("pins.json",function(f){var g=$(document.body),d=f.map(function(d){return{Pin:d,Size:d.LgSize,Used:!1,Elem:$(document.createElement("div")).addClass("pin").css("background-image",'url("c/'+d.File+'")').appendTo(g)}}),f=function(){var f=Date.now();GridOf((window.innerWidth-20)/4)(d);setTimeout(function(){Toast("4x grid of "+d.length+" items.","( in "+(Date.now()-f)+"ms )")},0)};f();$(window).on("resize",f)});
